<mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
  <!-- For nodes without children -->
  <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
    <button mat-icon-button disabled></button>
    {{ node.item }}
  </mat-tree-node>

  <!-- For nodes with children and toggle functionality -->
  <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding matTreeNodeToggle
                [cdkTreeNodeTypeaheadLabel]="node.item">
    <button [attr.aria-label]="'Toggle ' + node.item" matTreeNodeToggle>

      <!-- Display expand_more when the node is not loading and is expanded -->
       @if (!node.isLoading() && treeControl.isExpanded(node)) {
        <fa-icon class="fa-solid fa-chevron-down"></fa-icon>
       }

      <!-- Display expand_less when the node is not loading and is collapsed -->
       @if (!node.isLoading() && !treeControl.isExpanded(node)) {
        <fa-icon class="fa-solid fa-chevron-up"></fa-icon>
       }


    </button>
    {{ node.item }}

    <!-- Loading indicator -->
    @if (node.isLoading()) {
      <div>
        <mat-progress-bar mode="indeterminate" class="example-tree-progress-bar"></mat-progress-bar>

      </div>
    }

  </mat-tree-node>
</mat-tree>

