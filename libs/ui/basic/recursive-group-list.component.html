@if (groups) {
  <ul>
    @for (group of groups; track $index) {
      <li (click)="group.toggleGroup()" [ngClass]="{'expanded': group.isExpanded(), 'collapsed': !group.isExpanded()}" class="group-item">
        <span>{{ group.name }}</span>
        @if (group.isGroup()) {
          <span> (click to expand/collapse)</span>
        }
      </li>

      <!-- Conditionally render subgroups if the group is expanded -->
      @if (group && group.isExpanded()) {
        <ul class="group-subgroups">
          <app-recursive-group-list [groups]="group.groups ?? []"></app-recursive-group-list>
        </ul>
      }
    }
  </ul>
}

