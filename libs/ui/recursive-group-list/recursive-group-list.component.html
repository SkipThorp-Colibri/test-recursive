@if (groups) {
  @for (group of groups; track $index) {
    <div class="m-1">
      <div
        (click)="group.toggleGroup()"
        [ngClass]="{'expanded cursor-pointer transition-colors duration-300': group.isExpanded(), 'collapsed': !group.isExpanded(), ' hover:bg-[#87CEFA]': group.isGroup()}"
        class="group-node  p-2.5 border-2 border-[#1E3A8A] rounded-md flex items-center justify-start">

        <!-- Toggle icon -->
         @if (group.isGroup()) {
          @if (group.isExpanded()) {
            <span><i class="fa fa-chevron-up"></i></span>
          }
          @else {
            <span><i class="fa fa-chevron-down"></i></span>
          }
        }

        <!-- Group name -->
        <span class="group-name ml-2.5 font-bold">{{ group.name }}</span>
      </div>

      <!-- Conditionally render subgroups if the group is expanded -->
       @if (group.isExpanded()) {
        <div class="group-subgroups ml-5 p-1.25">
          <clx-recursive-group-list [groups]="group.groups"></clx-recursive-group-list>
        </div>
      }
    </div>
  }
}
