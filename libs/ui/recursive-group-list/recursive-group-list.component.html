@if (groups) {
  @for (group of groups; track $index) {
    <div class="m-1">
      <div
        (click)="onGroupClick(group)"
        [ngClass]="{'expanded cursor-pointer transition-colors duration-300': group.isExpanded(), 'collapsed': !group.isExpanded(), 'hover: cursor-pointer': group.isGroup()}"
        class="group-node p-2.5 border-2 rounded-md flex items-center justify-start"
        (contextmenu)="onRightClick($event, group)">

        @if (group.isGroup()) {
          @if (group.isExpanded()) {
            <span><i class="fa fa-chevron-up"></i></span>
          }
          @else {
            <span><i class="fa fa-chevron-down"></i></span>
          }
        }

        <span class="group-name ml-2.5 font-bold">{{ group.name }}</span>
      </div>

      @if (group.isExpanded()) {
        <div class="group-subgroups ml-5 p-1.25">
          <clx-recursive-group-list
            [groups]="group.subGroups"
            (selectedGroupChange)="selectedGroupChange.emit($event)">
          </clx-recursive-group-list>
        </div>
      }
    </div>
  }
}


<clx-context-menu
  [groupId]="selectedGroupId"
  [visible]="contextMenuVisible"
  [position]="contextMenuPosition"
  (delete)="deleteGroup($event)"
  (close)="contextMenuVisible = false">
</clx-context-menu>


